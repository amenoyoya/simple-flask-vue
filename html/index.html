<!DOCTYPE html>
<html lang=ja>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/static/css/bulma.css">
    </head>
    <body>
        <section class="section">
            <div class="container" id="app">
                <div class="columns">
                    <div class="column is-one-fifth">
                        <ul class="list">
                            <li v-for="usr in users">
                                <a class="button is-link is-fullwidth" @click.prevent="switch_user(usr)">{{ usr }}</a>
                            </li>
                        </ul>
                    </div>
                    <div class="column">
                        <h1 class="title">{{ title }}</h1>
                        <p class="subtitle">{{ user }}</p>
                        <div class="is-full">{{ content }}</div>
                    </div>
                </div>
            </div>
        </section>
        
        <script src="/static/js/vue.min.js"></script>
        <script src="/static/js/axios.min.js"></script>
        <script>
            var app = new Vue({
            el: '#app',
            data: {
                users: [],
                user: '',
                title: '',
                content: ''
            },
            methods: {
                switch_user(user){
                    // APIサーバーを叩いて、ユーザー情報を取得
                    axios.get('/api/users')
                    .then(function(res) {
                        app.users = Object.keys(res.data);
                        data = res.data[user];
                        if (data) {
                            app.user = user;
                            app.title = data.title;
                            app.content = data.content;
                        }
                    })
                    .catch(function(err) {
                        console.log(err);
                    });
                }
            }
        });

        app.switch_user('admin');
        </script>
    </body>
</html>